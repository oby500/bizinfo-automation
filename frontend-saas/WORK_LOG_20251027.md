# 작업 기록 - 2025년 1월 27일

## 📋 작업 요약

Next.js SaaS 프론트엔드 개발 및 디자인 완성, 기능 강화 계획 수립

---

## ✅ 완료된 작업

### 1. 디자인 개선 (레퍼런스 기반)

#### 1.1 PC 레이아웃 구조 변경
- **기존**: 상단 헤더 + 전체 너비 콘텐츠
- **변경**: 좌측 사이드바(필터) + 우측 메인(검색 결과) 레이아웃
- **파일**: `app/(dashboard)/page.tsx`

#### 1.2 헤더 개선
```
로튼
정부지원 도전 - 신청서나 사업계획서 초안을 도와드립니다
```
- 브랜딩 메시지 추가
- 서비스 가치 명확화

#### 1.3 검색 필터 사이드바 (왼쪽 고정, 264px)
**구현된 필터:**
- 키워드 검색 (텍스트 입력)
- 지원분야 (드롭다운)
- 지역 (드롭다운)
- 대상 (드롭다운)
- 연령 (드롭다운)
- 창업업력 (드롭다운)
- 상태 (전체/진행중/마감임박)
- 검색 버튼

**제거된 필터:**
- ❌ 출처 (K-Startup, BizInfo) - 통합 검색으로 불필요

#### 1.4 공고 카드 디자인 (레퍼런스 참조)
```
┌─────────────────────────────────────────────────┐
│ [멘토링 · 컨설팅 · 교육]              D-16      │ ← 카테고리 + D-day
│                                                 │
│ [강동구 청년해냄센터] 전문분야 창업...           │ ← 제목 (클릭 가능)
│                                                 │
│ 강동구 청년을 대상으로 사업계획서 작성 및...     │ ← 간단요약
│ 전문가 멘토링을 제공합니다.                     │
│ ───────────────────────────────────────────────│
│ 강동구 청년해냄센터 | 시작 2025-10-24 | 마감... │ ← 메타정보
└─────────────────────────────────────────────────┘
```

**카드 구성 요소:**
- ✅ 상단: 카테고리 배지 (초록색 테두리) + 상태 배지 (D-day or N)
- ✅ 제목: 크고 굵게, hover 시 오렌지색
- ✅ 간단요약: 2줄 표시 (line-clamp-2)
- ✅ 하단: 조직명 | 시작일 | 마감일 | 조회수
- ✅ 제목 클릭 → 새창으로 상세페이지

**제거된 요소:**
- ❌ 등록일자 (불필요한 정보)
- ❌ 상세페이지 링크 버튼 (제목 클릭으로 대체)
- ❌ 상세요약 확장 기능 (상세페이지에서 확인)

---

### 2. 기능 수정

#### 2.1 API 통합
- FastAPI 백엔드와 통신 (`http://localhost:8000`)
- 파라미터 매핑 수정: `query` → `q`, `page_size` → `limit`

#### 2.2 데이터 표시
- `simple_summary` 필드 활용
- 간단요약 2줄 미리보기
- 상세요약은 상세페이지에서만 표시

#### 2.3 네비게이션
- 제목 클릭 시 상세페이지 새창 열기
- `window.open('/announcement/${id}', '_blank')`

---

## 🔍 시스템 분석 완료

### 백엔드 API 엔드포인트 (FastAPI)
```python
✅ GET /api/search           # 일반 검색 (q, page, limit, status)
✅ GET /api/search/semantic  # AI 의미 검색 (OpenAI embedding)
✅ GET /api/recent           # 최근 공고 (limit)
✅ GET /api/announcement/{id} # 상세 조회
✅ GET /api/stats            # 통계 (캐시 60초)
✅ GET /health               # 헬스체크
```

### 데이터베이스 스키마 (Supabase)

**테이블:**
- `kstartup_complete` (K-Startup 공고)
- `bizinfo_complete` (BizInfo 공고)

**주요 필드:**
```typescript
// 기본 정보
- announcement_id, biz_pbanc_nm/pblanc_nm (제목)
- pbanc_rcpt_bgng_dt/reqst_begin_ymd (시작일)
- pbanc_rcpt_end_dt/reqst_end_ymd (마감일)
- pbanc_ntrp_nm/organ_nm (기관명)

// AI 생성 콘텐츠
- simple_summary (간단요약)
- detailed_summary (상세요약)
- full_text (전체 텍스트)
- embedding (벡터 검색용)

// 필터링 가능 필드
- supt_biz_clsfc (지원사업 분류)
- aply_trgt_ctnt/sprt_trgt_nm (지원대상)
- supt_regin/loc_nm (지역)
- program_type (프로그램 유형)
- target_age (연령)
- target_business (업력)
- status (진행중/마감임박/종료)

// 부가 정보
- attachment_urls (첨부파일 URL 배열)
- views (조회수)
- pdf_storage_url (PDF 저장 URL)
```

**첨부파일 처리:**
- 외부 URL만 수집 (원본 사이트 링크)
- 로컬/서버에 파일 저장 ❌
- 클릭 시 원본 사이트로 이동 ✅

---

## 🚀 기능 강화 로드맵 (우선순위)

### Phase 1: 검색 & 필터링 강화 ⭐⭐⭐

#### 1.1 AI 의미 검색 활성화
**현황:** 백엔드 구현 완료, 프론트엔드 미사용
**기능:**
- 일반 검색 + 의미 검색 병행
- 유사도 점수 표시
- "연관 공고" 섹션
**참고:** Google, Naver 검색 추천

#### 1.2 실제 데이터 기반 필터
**현황:** 하드코딩된 드롭다운
**개선:**
- DB에서 실제 카테고리 로드
- 지원분야, 지역, 대상 동적 생성
- 필터 선택 시 실시간 업데이트
**참고:** 잡코리아, 사람인 필터

#### 1.3 다중 필터 조합
**기능:**
- 여러 필터 동시 적용
- 선택된 필터 태그 표시
- 필터 초기화 버튼
**참고:** 쿠팡, 11번가

### Phase 2: UX 개선 ⭐⭐

#### 2.1 무한 스크롤 / 더보기
- 자동 로드 or 더보기 버튼
**참고:** Instagram, Facebook

#### 2.2 검색어 자동완성
- 인기/최근 검색어 제안
**참고:** Google 검색창

#### 2.3 정렬 옵션
- 최신순, 마감임박순, 조회수순, 관련도순
**참고:** 쿠팡, 네이버쇼핑

#### 2.4 로딩 개선
- Skeleton UI
**참고:** LinkedIn, Twitter

### Phase 3: 개인화 ⭐

#### 3.1 북마크
- 로컬 스토리지 (비로그인)
- Supabase (로그인)
**참고:** YouTube, Pinterest

#### 3.2 마감 알림
- 브라우저 알림 (D-3, D-1)
**참고:** Gmail, Slack

#### 3.3 최근 본 공고
- 로컬 스토리지
**참고:** 쿠팡, 네이버

### Phase 4: 고급 기능

#### 4.1 공고 비교
- 최대 3개 비교
**참고:** 자동차, 호텔 비교

#### 4.2 AI 맞춤 추천
- 검색 패턴 학습
**참고:** Netflix, YouTube

#### 4.3 통계 대시보드
- 신규 공고 그래프
**참고:** Google Analytics

---

## 📁 주요 파일 구조

```
frontend-saas/
├── app/
│   ├── (dashboard)/
│   │   ├── page.tsx                    # 메인 검색 페이지 ⭐
│   │   ├── announcement/
│   │   │   └── [id]/
│   │   │       └── page.tsx            # 상세 페이지
│   │   ├── dashboard/
│   │   │   └── page.tsx                # 팀 대시보드
│   │   └── pricing/
│   │       ├── page.tsx                # 가격 페이지
│   │       └── submit-button.tsx
│   └── layout.tsx
├── components/
│   └── ui/                             # shadcn/ui 컴포넌트
├── package.json                        # Next.js 15.4.0, React 19
└── tailwind.config.ts                  # Tailwind CSS 4

backend (E:\gov-support-automation\frontend\):
└── app.py                              # FastAPI 백엔드 ⭐
```

---

## 🔧 기술 스택

### Frontend
- **Framework:** Next.js 15.4.0 (App Router)
- **Language:** TypeScript
- **Styling:** Tailwind CSS 4
- **UI Library:** shadcn/ui
- **Icons:** Lucide React
- **Package Manager:** pnpm

### Backend
- **Framework:** FastAPI
- **Database:** Supabase (PostgreSQL)
- **AI:** OpenAI (GPT-4, text-embedding-ada-002)
- **Language:** Python 3.11+

### Infrastructure
- **Dev Server:**
  - Frontend: http://localhost:3000 (Next.js)
  - Backend: http://localhost:8000 (FastAPI)
- **Database:** Supabase Cloud

---

## 🎯 다음 단계 (제안)

### 우선순위 1: AI 의미 검색 통합 (30분)
**이유:**
- 백엔드 API 이미 구현됨
- 즉시 차별화 가능
- 검색 품질 대폭 향상

**구현:**
1. `/api/search/semantic` 엔드포인트 호출
2. 일반 검색 결과와 병합
3. 유사도 점수 표시

### 우선순위 2: 실제 필터 구현 (1시간)
**이유:**
- 현재 필터가 작동하지 않음
- 사용성 크게 향상
- DB 데이터 활용

**구현:**
1. 필터 옵션 API 생성
2. 동적 드롭다운 생성
3. 다중 선택 지원

### 우선순위 3: 무한 스크롤 (30분)
**이유:**
- 사용자 경험 개선
- 모바일 친화적

---

## 📝 메모

### 확인된 사항
1. ✅ FastAPI 백엔드 정상 작동 (localhost:8000)
2. ✅ Next.js 프론트엔드 정상 작동 (localhost:3000)
3. ✅ Supabase 데이터베이스 연결 정상
4. ✅ AI 요약 데이터 DB에 저장됨
5. ✅ 첨부파일 URL 수집 완료 (외부 링크)

### 주의사항
1. 출처(K-Startup, BizInfo) 필터 제거됨 - 통합 검색
2. 등록일자 표시 제거됨 - 불필요한 정보
3. 상세요약은 상세페이지에서만 표시
4. 모든 외부 링크는 새창 열기 (_blank)

---

## 🐛 알려진 이슈

없음 (현재 디자인 및 기본 기능 정상 작동)

---

## 📚 참고 자료

### 레퍼런스 사이트
- **레이아웃**: 기업마당 검색 페이지
- **필터**: 잡코리아, 사람인
- **검색**: Google, Naver
- **추천**: Netflix, YouTube
- **쇼핑**: 쿠팡, 11번가
- **북마크**: Pinterest, YouTube
- **알림**: Gmail, Slack

### 문서
- Next.js 15: https://nextjs.org/docs
- FastAPI: https://fastapi.tiangolo.com/
- Supabase: https://supabase.com/docs
- Tailwind CSS 4: https://tailwindcss.com/docs

---

**작성일:** 2025년 1월 27일
**작성자:** Claude (with User)
**프로젝트:** 로튼 - 정부지원사업 통합 검색 시스템
